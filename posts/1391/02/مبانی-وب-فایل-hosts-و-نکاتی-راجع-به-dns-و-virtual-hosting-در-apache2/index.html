<!doctype html><html lang="fa" dir="rtl"><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-HTH8HV1F9Z"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-HTH8HV1F9Z', { 'anonymize_ip': false });
}
</script><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="keywords" content="لینوکس,Apache,DNS,Hosts,Windows,Hacking,مدیریت سرور,فایل hosts,فایل هاست,تنظیم DNS,پیکربندی bind,پیکربندی آپاچی,هاست اشتراکی,اوبونتو,دبیان,ubuntu,Debian"><meta name="geo.region" content="IRAN"><link rel="canonical" href="https://hejazee.ir/posts/1391/02/%D9%85%D8%A8%D8%A7%D9%86%DB%8C-%D9%88%D8%A8-%D9%81%D8%A7%DB%8C%D9%84-hosts-%D9%88-%D9%86%DA%A9%D8%A7%D8%AA%DB%8C-%D8%B1%D8%A7%D8%AC%D8%B9-%D8%A8%D9%87-dns-%D9%88-virtual-hosting-%D8%AF%D8%B1-apache2/"><link rel="shortcut icon" href="/favicon.ico" type="image/png"><title>مبانی وب: فایل hosts و نکاتی راجع به DNS و Virtual hosting در apache2 | وبلاگ رسمی احمد حجازی</title><link rel="stylesheet" href="/lib/bootstrap-5.1.3-dist/css/bootstrap.rtl.min.css"><link rel="stylesheet" href="/lib/fontawesome-free-5.15.2-web/css/all.min.css"><link rel="stylesheet" href="/fonts/fonts.css"><link rel="stylesheet" href="/scss/index.172bdd1266bb92eb39450b3215cc97ecd4d7ec43ae649679fe3140f189d01c32.css" integrity="sha256-FyvdEma7kus5RQsyFcyX7NTX7EOuZJZ5/jFA8YnQHDI=" crossorigin="anonymous"></head><body><nav class="navbar navbar-expand-lg navbar-dark bg-dark" id="farsaran-header-nav"><div class="container"><a class="navbar-brand order-0 flex-grow-1 flex-lg-grow-0" href="/"><img src="/logo.svg" alt="وبلاگ رسمی احمد حجازی" height="34"></a>
<button class="navbar-toggler order-2 order-lg-1" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="نمایش منو">
<span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse mb-3 mb-lg-0" id="navbarSupportedContent"><ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item"><a class="nav-link" href="/contact/">تماس</a></li><li class="nav-item"><a class="nav-link" href="/about/">درباره</a></li></ul></div></div></nav><div class="container mt-4"><div class="row"><div class="col-md-9"><header><h1 class="post-title fw-bold fs-2"><a class="text-dark" href="/posts/1391/02/%D9%85%D8%A8%D8%A7%D9%86%DB%8C-%D9%88%D8%A8-%D9%81%D8%A7%DB%8C%D9%84-hosts-%D9%88-%D9%86%DA%A9%D8%A7%D8%AA%DB%8C-%D8%B1%D8%A7%D8%AC%D8%B9-%D8%A8%D9%87-dns-%D9%88-virtual-hosting-%D8%AF%D8%B1-apache2/">مبانی وب: فایل hosts و نکاتی راجع به DNS و Virtual hosting در apache2</a></h1></header><small class="d-block text-secondary post-date">ارسال شده در
<time datetime="2012-05-18">May 18, 2012</time></small><article class="blog-post" role="article" typeof="schema:Article"><p>مطلب خیلی ساده ای است، ولی خیلی ها از آن بی خبرند!</p><h3><strong>مقدمات</strong></h3><p>هر وب سایتی، بر روی یک سرور قرار گرفته است. (سرور یک کامپیوتر است که دسترسی به اینترنت دارد و IP ی معتبر دارد و خدمات اینترنتی ارائه می دهد.)<br>در ضمن، ممکن است بر روی یک سرور، چند تا وبسایت وجود داشته باشد.<br>همچنین ممکن است یک سرور، چند تا آدرس IP داشته باشد. اصطلاحا می گوییم چند تا Network interface دارد.<br>هر وب سایتی، معمولا داری یک نام دامنه است (مثلا www.example.com)</p><p>هنگامی که شما آدرس یک سایت را در مرورگر تایپ می کنید و وارد سایت می شوید، اتفاقات زیر می افتد:</p><p>1 - ابتدا باید آدرس سایت به آدرس IP تبدیل شود. زیرا بدون داشتن IP ، هرگز نمی توان به کامپیوتری در شبکه دسترسی داشت. قبل از هر چیز باید مشخص شود که آدرس IP ی کامپیوتر مورد نظر شما چیست.<br>برای این منظور، از DNS Server استفاده می شود. کامپیوتر شما به DNS Server متصل می شود و آدرس سایت را (مثلا www.example.com را) به آن ارسال می کند. DNS Server هم موظف است که آدرس IP ی آن را برگرداند.<br>به این ترتیب، آدرس IP ی سایت مورد نظر شما به دست می آید.<br>اما، قبل از این که کامپیوتر شما به DNS Server متصل شود، ابتدا بررسی می کند که آیا آدرس مورد نظر و IP ی معادل آن، قبلا Cache شده است یا خیر.<br>در صورتی که پیش از این ، یک بار آدرس IP ی آن سایت مشخص شده باشد و در سیستم شما Cache شده باشد، دیگر مزاحم DNS Server نمی شود. بلکه مستقیما از درون Cache آن را بازیابی می کند.<br>در ویندوز، برای این که Cache مربوط به DNS را پاک کنید و سیستم را مجبور کنید مجددا به DNS Server متصل شود، کافی است در خط فرمان CMD دستور زیر را وارد کنید:<br>ipconfig /flushdns<br>------<br>کامپیوتر شما همچنین، قبل از این که به DNS Server متصل شود، فایلی به نام فایل hosts را بررسی می کند. در فایل hosts نام دامنه ی سایت ها و IP ی معادل آن ها نوشته شده است. در صورتی که Ip ی سایت مورد نظر در آن موجود بود، دیگر به DNS متصل نمی شود و آدرس IP را مستقیما از درون فایل hosts استفاده می کند.</p><p><strong>فایل hosts</strong></p><p>در ویندوز 7 آدرس فایل hosts این است:</p><p dir="ltr">C:\Windows\System32\drivers\etc\hosts</p><p>در لینوکس هم آدرس آن به این صورت است:</p><p dir="ltr">/etc/hosts</p><p>برای ویرایش فایل hosts در ویندوز 7 کافی است در منوی Start برنامه ی Notepad را پیدا کنید. روی آن راست کلیک کنید و Run as administrator را انتخاب کنید. سپس در پنجره ی Notepad کلید Ctrl + O را بزنید و در پنجره ی Browse که باز می شود، فایل hosts را با توجه به مسیر فوق الذکر انتخاب کنید.</p><p>در لینوکس هم کافی است از دستور زیر استفاده کنید:</p><p dir="ltr">sudo vim /etc/hosts</p><p>در درون فایل hosts می توانید خیلی کار ها انجام دهید که بعضا می تواند جذاب باشد!</p><p>فرمت فایل hosts به این صورت است که خطوطی که با # شروع می شوند، Comment محصوب می شوند و اثری ندارند.<br>سایر خطوط از دو قسمت تشکیل شده اند که با یک فضای خالی مثل space یا tab از هم جدا شده اند: آدرس IP و نام دامنه. مثلا:</p><p dir="ltr">192.168.10.10 www.test.com</p><p dir="rtl">خط فوق به این معنی است که سایت www.test.com دارای آدرس Ip ی 192.168.10.10 می باشد.</p><p dir="rtl">به این ترتیب، هرگاه شما آدرس www.test.com را باز کنید، سیستم کاری به DNS نخواهد داشت و مستقیما آدرس IP ی 192.168.10.10 را باز خواهد کرد.</p><p dir="rtl">برخی از فوایدی که این کار دارد عبارتند از:</p><ol><li>ممکن است شما دوست نداشته باشید یا نخواهید پول بدهید تا یک Domain را ثبت کنید. (زیرا ثبت دامنه های .com چیزی حدود 18 هزار تومان و دامنه های IR حدود 6 هزار تومان است)<br>در این صورت، خیلی راحت، دامنه ی دلخواهتان را در فایل hosts تنظیم می کنید و درست مانند این است که آن را ثبت کرده اید! (فقط با این تفاوت که فقط بر روی سیستم شما قابل استفاده است)</li><li>ممکن است بخواهید IP ی سایتی را عوض کنید. مثلا از سایت پیوند ها متنفرید (مثل من) و می خواهید که این سایت را نبینید (زیرا برای اعصاب انسان مضر است!)<br>کافی است که آدرس آن را با یک IP ی دلخواه که وجود ندارد و یا هر IP ی دیگری مثل 127.0.0.1 در درون فایل hosts ذخیره کنید. [البته برای این که کاملا از شر پیوندها خلاص شوید، بهتر است از درون فایروال سیستم تان Ip ی آن را بن کنید. مثل من!]</li><li>برای کرک کردن نرم افزار ها مفید است. برخی نرم افزار ها، به صورت دوره ای به سایت شرکت سازنده شان متصل می شوند و آخرین Update ها را دریافت می کنند و به این ترتیب کرک نرم افزار خراب می شود و Expire می شود و نرم افزار قابل استفاده نخواهد بود.<br>Cracker هم معمولا، آدرس سایت سازنده و آدرسی که نرم افزار برای Update به آن مراجعه می کند را به درون فایل hosts اضافه می کنند و IP&nbsp; ی 127.0.0.1 را به آن اختصاص می دهند. به این ترتیب دسترسی نرم افزار به آن سایت مسدود می شود و نمی تواند خودش را Update کند و لذا کرک آن خراب نمی شود.</li><li>برای مدیران سرور، ممکن است که سایتی داشته باشید که بر روی یک سرور موجود باشد. سپس آن را به یک سرور جدید منتقل می کنید یا به هر دلیل آدرس IP ی سایت تغییر می کند.<br>مدیران سرور اطلاع دارند که در حالت، باید تنظیمات DNS را تغییر دهند و آدرس IP ی جدید را به دامنه ی مورد نظر انتساب دهند. اما وقتی این کار را می کنید، گاهی تا 72 ساعت طول می کشد تا تغییرات اعمال شود.<br>این یک مدت طولانی است که ممکن است خیلی طاقت فرسا باشد. خصوصا که عجله داشته باشید!<br>در این شرایط خیلی ساده می توانید از درون فایل hosts تنظیم کنیدتا فورا به سایت جدیدتان دسترسی پیدا کنید و بتوانید ادامه ی کار را پیگیری کنید.</li><li>هکر ها گاهی از این روش برای ایجاد fake page استفاده می کنند. یک ویروس می تواند فایل hosts را بر روی سیستم شما تغییر دهد طوری که مثلا وقتی شما صفحه ی لاگین gmail را باز می کنید، به جای این که به IP ی gmail متصل شوید، به آدرس یک سرور دیگر که متعلق به hacker است متصل می شوید و اطلاعات لاگین مانند نام کاربری و پسورد را خیلی راحت در اختیار هکر قرار می دهید. این خیلی خطرناک است. هوشیار باشید.</li><li>و ... .</li></ol><p>در صورتی که آدرس مورد نظر در فایل&nbsp; hosts موجود نبود، آن گاه از DNS Server استفاده می شود.</p><p>2 - هنگامی که آدرس IP ی سایت مورد نظر شما (که در مرورگر وارد کرده اید) مشخص شد، مرورگر می تواند به سایت متصل شود و محتویات آن را دریافت کند.</p><p>اما، نکته این جاست که ممکن است یک سرور، با یک آدرس IP چند تا سایت را میزبانی کند. به این معنی که چند تا سایت بر روی همان سرور و با همان IP وجود داشته باشد. به عبارت دیگر، ممکن است که آدرس Ip ی چندین سایت یکسان باشد.<br>به این ویژگی، Shared hosting می گویند. هاستینگ اشتراکی و یا Virtual hosting میزبانی مجازی</p><p>هنگامی که مرورگر آدرس Ip ی سایت را به دست می آورد و به سرور متصل می شود، باید به طریقی به سرور اطلاع دهد که کدام سایت را می خواهد.<br>برای این منظور، مرورگر شما، یک هدر HTTP به نام host را به سرور ارسال می کند.<br>آن چه که مرورگر به وب سرور ارسال می کند، چیزی شبیه زیر است:</p><p dir="ltr"><span style="color:red"><strong>GET /index.html HTTP/1.1</strong></span><br><strong>Host</strong>: www.example.com<br><strong>User-Agent</strong>: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0 AlexaToolbar/alxf-2.15<br><strong>Accept</strong>: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8<br><strong>Accept-Language</strong>: en-us,en;q=0.5<br><strong>Accept-Encoding</strong>: gzip, deflate<br><strong>Connection</strong>: keep-alive<br><strong>Cookie</strong>: SESS0477099b084e7aee1ecf43e5dd4d9512=l0-O-lzs4ltRf3B6hJVVTh1DoyCFj1Qo3Cjs65L8Np0; SESSaee8cf9fa83d1d0bab0fa3a76622e624=sv0a23jp0moq5bmfjarbl6n127; doxygen_width=300; SESSf0c35bf116e5bf061605c1b3d4d5b6c3=zxtt9_ztYWRbKfH8TmznFtKiajQEDDTq2keYmXbFkX4; SESSf0eb9d8e4a8f983887cb2e810d8a056b=emml29jdirmu79qc3q0q9fipv6; DrupalAdminToolbar=expanded%3D1%26activeTab%3Dadmin-menu</p><p>خط اول عنوان تقاضا است که شامل 3 بخش می شود:</p><ol><li>متد تقاضا که در این جا GET است. می تواند POST و یا HEAD (و یا چند تا مورد دیگر) هم باشد. (قابل مقایسه است به خاصیت action در تگ form در HTML که مثلا action="get" یا action="post"</li><li>آدرس فایل مورد تقاضا</li><li>پروتکل و نسخه ی آن که در این جا HTTP نسخه ی 1.1 است.</li></ol><p>خطوط بعدی Header ها هستند. به آن ها هدر های HTTP گفته می شود. هر هدر در یک سطر قرار می گیرد. هر هدر از یک نام و یک مقدار تشکیل شده است که با : از هم جدا شده اند.<br>من نام هدر ها را پررنگ کرده ام.</p><p>برخی از پرکاربرد ترین هدر های HTTP عبارتند از:</p><ol><li>Host هدر هاست در واقع همان هدری است که مورد بحث ما است. مرورگر، نام دامنه ی سایت مورد نظر را توسط این هدر به سرور ارسال می کند. در صورتی که بر روی وب سرور، چند تا سایت وجود داشته باشد، سرور از طریق این هدر، متوجه می شود که محتوای کدام سایت را باید به مرورگر ارسال کند.</li><li>User-Agent : مرورگر، اطلاعاتی راجع به خود مرورگر و سیستم عامل کاربر را از طریق این هدر به سرور ارسال می کند. به این ترتیب سرئر می تواند که نوع مرورگر و سیستم عامل بازدید کنندگان را کشف کند. و صفحه را به صورت سفارشی برای وی ارسال کند. مثلا وقتی شما سایت Google را با موبایلتان بازدید می کنید، گوگل از روی هدر User-Agent متوجه می شود که شما دارید از موبایل استفاده می کنید و در نتیجه صفحه ی مخصوص موبایل را برای شما نمایش می دهد و ....</li><li>و ....</li></ol><p>این اتفاقاتی بود که بر روی Client یعنی کامپیوتر شما و مرورگرتان اتفاق می افتند.</p><p>&nbsp;</p><hr><h3><strong>اتفاقات سمت سرور</strong></h3><p>اما در مورد آن چه که بر روی سرور اتفاق می افتد. فرض من بر این است که سرور با سیستم عامل لینوکس Ubuntu و یا ویندوز کار می کند. گرچه سیستم عامل های دیگر هم مشابه هستند.<br>هم چنین فرض بر این است که وب سرور مورد استفاده، Apache است (در ویندوز، از XAMPP استفاده می کنم.)</p><p>در صورتی که از فایل hosts استفاده می کنید که هیچ، به قسمت بعد از "تنظیمات مربوط به DNS" بروید.<br>اما اگر قرار است که واقعا یک دامنه را ثبت کنید، باید DNS Server هم تنظیم باشد.</p><p><strong>تنظیمات مربوط به DNS:</strong></p><p>قبل ار هر چیز باید یک دامنه را ثبت کنید برای این منظور، باید به یکی از شرکت های ثبت دامنه پول پرداخت کنید تا فورا دامنه فعال شود. (البته به جز دامنه های IR که به خاطر پیشرفتگی بیش از حد !!! باید یک شبانه روز صبر کنید تا به صورت دستی توسط مامور مربوطه بررسی و ثبت شود)</p><p>سپس به شما یک کنترل پنل دامنه (Domain Control Panel) داده می شود. اگر داده نشد، بدانید که سر شما کلاه گذاشته شده و هر طور شده کنترل پنل دامنه را بگیرید. (برخی شرکت ها نمی دهند!)</p><p>در کنترل پنل دامنه، یک جا دارد که آدرس DNS Server های دامنه را وارد کنید. (وقتی مرورگر می خواهد آن سایت را باز کند، به این DNS Server های متعلق به این دامنه، متصل می شود)</p><p>در این قسمت، باید آدرس DNS Server تان را بدهید. باید این آدرس از قبل قابل resolve باشد. یعنی بدون نیاز به این که DNS Server شما روشن باشد، باید آدرس آن قابل تبدیل به IP باشد! اگر چنین نیست، می توانید از Child DNS Server استفاده کنید. به این ترتیب که دو تا Child dns server به نام ns1 و ns2 درست می کنید و آدرس Ip ی سرورتان را به آن ها اختصاص می دهید. سپس در تنظیمات DNS در کنترل پنل دامنه، آدرس Child DNS Server های خودتان را وارد می کنید. (مثلا من برای سایت خودم به آدرس www.hejazee.com از DNS های ns1.hejazee.com و&nbsp; ns2.hejazee.com استفاده کنم.) برخی از مردم، به این کار، استفاده از <strong>DNS اختصاصی</strong> هم می گویند. ولی من این اصطلاح را صحیح نمی دانم</p><p>قابل توجه است که برخی شرکت های کلاه بردار، کنترل پنل دامنه را به شما نمی دهند، و در عوض از شما پول می گیرند تا برایتان به قول خودشان DNS Server اختصاصی تنظیم کنند!! مواظب باشید گول نخورید! این کار اصلا ربطی به آن شرکت ندارد و نباید هم پولی برای آن به شرکت بدهید. خودتان باید بتوانید از کنترل پنل دامنه این کار را انجام دهید.</p><p>-----------------</p><p>پس از این که در کنترل پنل دامنه، DNS ها را تنظیم کردید (معمولا حداقل 2 تا DNS باید تنظیم کنید. اجباری نیست IP ی آن ها متفاوت باشد. گرچه در اصل باید IP ها متفاوت باشد. ولی اجباری نیست)</p><p>اکنون باید بر روی سرورتان DNS Server را نصب کنید. برای این منظور، پکیج bind9 را در Ubuntu نصب کنید. (جزییات کار و تنظیم DNS را در این جا نمی توانم بگویم. فقط مروری عرض می کنم زیرا می تواند خیلی بحث پیچیده و خیلی طولانی باشد)</p><p>سپس باید برای هر یک از دامنه هایی که میزبانی می کنید، یک Master zone ایجاد کنید و در درون آن، به ازای هر یک از Sub domain ها و خود دامنه، یک A Record ایجاد کنید. رکورد های مختلفی وجود دارد که اینجا جای بحث راجع به آن ها نیست.</p><p>خلاصه باید برای هر دامنه، یک Master zone داشته باشید.</p><p>پس از این که DNS هم پیکر بندی شد، اکنون اگر دامنه ی مورد نظر را در مرورگر باز کنید، آدرس IP ی سرور شما باز می شود و هدر Host هم توسط مرورگر به سرور ارسال می شود.</p><p>اکنون باید Apache را نصب و پیکربندی کنید.</p><h3><strong>تنظیمات مربوط به Apache</strong></h3><p>اگر سرور شما مبتنی بر Ubuntu است، نام پکیج آپاچی عبارت است از apache2<br>باید آن را نصب کنید:</p><p dir="ltr">&nbsp;</p><pre class="brush: bash;fontsize: 100; first-line: 1;">
sudo apt-get install apache2
</pre><p>پیکربندی Apache کار سختی نیست (گرچه می تواند سخت هم باشد!)<br>برای استارت و استپ کردن Apache هم دستورات زیر استفاده می شوند:</p><pre class="brush: bash;fontsize: 100; first-line: 1;">
sudo service apache2 start
sudo service apache2 stop
sudo service apache2 restart
sudo service apache2 reload
</pre><p>اگر هم سرور شما ویندوزی است، می توانید XAMPP را نصب کنید. اگر XAMPP را بر روی ویندوز نصب کنید، مزیتی که برای شما دارد، این است که خیلی ساده و آسان است و همه موارد مورد نیازتان به یکباره نصب می شوند:</p><p>Apache, PHP, Mysql, perl, gd, ..., ...., All needed apache modules, All needed php modules, etc..., phpmyadmin, ...</p><p>آن چه در این جا برای ما مهم است و در همه ی سیستم عمال ها هم مشترک است، فایل پیکربندی Apache است.</p><p>در سیستم عامل Redhat و زیر مجموعه های آن، نام فایل httpd.conf است<br>در Debian و Ubuntu نام فایل apache2.conf است و آدرس آن هم /etc/apache2/apache2.conf می باشد.</p><p>در XAMPP بر روی ویندوز هم، فایل پیکربندی Apache در آدرس زیر واقع است:</p><p dir="ltr">C:\xampp\apache\conf\httpd.conf</p><p>نکته ای که حائز اهمیت است، این است که فایل پیکربندی Apache می تواند فایل های دیگری را هم Include کند. به این معنی که فایل پیکربندی Apache ممکن است بیش از یک فایل باشد و از چند قسمت تشکیل شده باشد. معمولا این کار را می کنند تا تنظیمات Apache تقسیم بندی و مرتب شود.</p><p>از آن جایی که به احتمال زیاد، مخاطبین این مطلب، اکثرا با ویندوز راحت تر هستند، پیکربندی Apache را در ویندوز و به کمک XAMPP توضیح می دهم. ولی در لینوکس هم مشابه همین است.</p><p>در فایل پیکربندی Apache خطوطی که به # شروع می شوند، Comment می باشند و اهمیتی ندارد (فقط راهنما هستند)</p><p><strong>دستور Listen</strong></p><p>&nbsp;دستور Listen در فایل پیکربندی Apache مشخص می کند که آپاچی باید بر روی کدام IP (ها) و بر روی کدام پورت (ها) گوش دهد. ممکن است این دستور چند بار استفاده شود. مثال:</p><p dir="ltr">Listen 80</p><p dir="rtl">بر روی تمام IP ها (Network Interfaces) گوش می دهد و روی پورت 80 کار می کند.</p><p dir="ltr">Listen 127.0.0.1:80<br>Listen 127.0.0.1:443</p><p dir="rtl">فقط بر روی Loopback interface گوش می دهد (یعنی فقط بر وی localhost قابل دسترسی است و از بیرون قابل دسترسی نیست) و روی پورت 80 (http) و 443 (https) کار می کند.<br>(آدرس IP بیشتر هنگامی به کار می آید که سرور شما، چند تا IP داشته باشد)</p><p dir="rtl"><strong>دستور ServerName</strong></p><p dir="rtl">نام سرور و آدرس IP را مشخص می کند. مثلا:</p><p dir="ltr">ServerName localhost:80</p><p dir="ltr">و یا</p><p dir="ltr">ServerName hejazee.com</p><p>در صورتی که سرور شما، فقط یک سایت را میزبانی کند، تنظیم این مقدار زیاد مهم نیست زیرا Apache به صورت خودکار آن را حدس می زند. اما اگر چند تا سایت را بر روی سرور میزبانی کنید، اهمیت این دستور مشخص می شود.</p><p><strong>دستور DocumentRoot</strong></p><p>مشخص می کند که هنگامی که شما نام دامنه را در مرورگر وارد می کنید، چه فایلی یا چه پوشه ای در سرور باید باز شود. معولا در لینوکس آدرس آن /var/www است:</p><p dir="ltr">DocumentRoot /var/www</p><p>در XAMPP ویندوز هم:</p><p dir="ltr">DocumentRoot "E:/xampp/htdocs"</p><p dir="rtl">(به جای \ از / استفاده کنید.)</p><h3 dir="rtl"><strong>Virtual hosting</strong></h3><p>در صورتی که می خواهید چند تا سایت را بر روی یک سرور میزبانی کنید، باید از Virtual host ها استفاده کنید.</p><p>در Ubuntu معمولا Virtual host ها را در پوشه ی /etc/apache2/sites-enabled/ تعریف می کنند.</p><p>در XAMPP ویندوز هم، Virtual host ها را باید در فایل زیر تعریف کنید:</p><p dir="ltr">E:\xampp\apache\conf\extra\httpd-vhosts.conf</p><p dir="rtl">فایل فوق را با Notepad باز کنید و آن را ویرایش کنید.</p><p dir="rtl"><strong>ساختار یک Virtual Host:</strong></p><pre style="direction:ltr">&lt;VirtualHost *:80&gt;
  DocumentRoot "E:/xampp/htdocs/www.test.com"
  ServerName test.com
  ServerAlias www.test.com
&lt;/VirtualHost&gt;</pre><p dir="rtl">*:80 آدرس IP و شماره پورتی است این VirtualHost بر روی آن کار می کند. * به این معنی است که بر روی تمام IP ها کار می کند.</p><p dir="rtl">ServerName مشخص می کند این VirtualHost برای سایت test.com است. یعنی اگر مرورگر هدر Host را با مقدار test.com ارسال کرد، این VirtualHost باید مورد استفاده قرار بگیرد.</p><p dir="rtl">ServerAlias مشخص می کند که به جز ServerName ، چه Host های دیگری هم به این VirtualHost تعلق دارند.</p><p dir="rtl">DocumentRoot هم مسیر ریشه ی سایت test.com را مشخص می کند.</p><p dir="rtl">در انتها فراموش نکنید که پس از ویرایش پیکربندی Apache باید Apache را restart و یا reload کنید تا تنظیمات اعمال شود.</p><p dir="rtl">به این ترتیب شما توانستید که یک سرور درست کنید که چندین سایت را میزبانی می کند. تشخیص سایت هم بر اساس هدر host می باشد و با VirtualHost ها Match می شود.</p><p dir="rtl">موفق باشید.</p><p dir="rtl">لطفا نظرات و سوالات و انتقادات و پیشنهادات خود را در همین صفحه به صورت دیدگاه برای من ارسال کنید.</p><p dir="rtl">متشکرم</p></article><div id="comments"><div id="disqus_thread"></div><script>
      window.disqus_config = function () { 
        this.language = "fa";
      };
      (function() {
          var d = document, s = d.createElement('script'); s.async = true;
          s.src = '//' + "hejazee" + '.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
      })();
    </script></div></div><aside class="col-md-3 mt-4"><h3>Monthly Archive</h3><ul><li><a href="/month/1395-06/" title="All posts from 1395-06">1395-06</a> (1)</li><li><a href="/month/1395-01/" title="All posts from 1395-01">1395-01</a> (1)</li><li><a href="/month/1394-12/" title="All posts from 1394-12">1394-12</a> (3)</li><li><a href="/month/1394-08/" title="All posts from 1394-08">1394-08</a> (1)</li><li><a href="/month/1394-07/" title="All posts from 1394-07">1394-07</a> (1)</li><li><a href="/month/1394-03/" title="All posts from 1394-03">1394-03</a> (1)</li><li><a href="/month/1394-02/" title="All posts from 1394-02">1394-02</a> (1)</li><li><a href="/month/1393-12/" title="All posts from 1393-12">1393-12</a> (1)</li><li><a href="/month/1393-07/" title="All posts from 1393-07">1393-07</a> (1)</li><li><a href="/month/1393-06/" title="All posts from 1393-06">1393-06</a> (2)</li><li><a href="/month/1393-05/" title="All posts from 1393-05">1393-05</a> (2)</li><li><a href="/month/1393-04/" title="All posts from 1393-04">1393-04</a> (4)</li><li><a href="/month/1393-03/" title="All posts from 1393-03">1393-03</a> (5)</li><li><a href="/month/1393-02/" title="All posts from 1393-02">1393-02</a> (1)</li><li><a href="/month/1393-01/" title="All posts from 1393-01">1393-01</a> (4)</li><li><a href="/month/1392-12/" title="All posts from 1392-12">1392-12</a> (5)</li><li><a href="/month/1392-10/" title="All posts from 1392-10">1392-10</a> (5)</li><li><a href="/month/1392-06/" title="All posts from 1392-06">1392-06</a> (1)</li><li><a href="/month/1392-04/" title="All posts from 1392-04">1392-04</a> (1)</li><li><a href="/month/1392-02/" title="All posts from 1392-02">1392-02</a> (1)</li><li><a href="/month/1392-01/" title="All posts from 1392-01">1392-01</a> (5)</li><li><a href="/month/1391-11/" title="All posts from 1391-11">1391-11</a> (5)</li><li><a href="/month/1391-10/" title="All posts from 1391-10">1391-10</a> (4)</li><li><a href="/month/1391-09/" title="All posts from 1391-09">1391-09</a> (2)</li><li><a href="/month/1391-08/" title="All posts from 1391-08">1391-08</a> (3)</li><li><a href="/month/1391-07/" title="All posts from 1391-07">1391-07</a> (6)</li><li><a href="/month/1391-05/" title="All posts from 1391-05">1391-05</a> (1)</li><li><a href="/month/1391-04/" title="All posts from 1391-04">1391-04</a> (1)</li><li><a href="/month/1391-03/" title="All posts from 1391-03">1391-03</a> (2)</li><li><a href="/month/1391-02/" title="All posts from 1391-02">1391-02</a> (4)</li><li><a href="/month/1391-01/" title="All posts from 1391-01">1391-01</a> (6)</li><li><a href="/month/1390-12/" title="All posts from 1390-12">1390-12</a> (9)</li><li><a href="/month/1390-11/" title="All posts from 1390-11">1390-11</a> (8)</li><li><a href="/month/1390-10/" title="All posts from 1390-10">1390-10</a> (7)</li><li><a href="/month/1390-09/" title="All posts from 1390-09">1390-09</a> (4)</li><li><a href="/month/1390-08/" title="All posts from 1390-08">1390-08</a> (7)</li><li><a href="/month/1390-07/" title="All posts from 1390-07">1390-07</a> (14)</li><li><a href="/month/1390-06/" title="All posts from 1390-06">1390-06</a> (18)</li></ul></aside></div></div><footer id="footer-wrapper"><div id="footer-bottom-wrapper"><div class="container"><div class="row"><div class="col-12"><p dir="ltr">&copy; Copyright 2011-2022 * Ahmad Hejazee * All rights reserved.</p><small dir="ltr">Proudly Powered by Drupal 10 ;)</small></div></div></div></div></footer><script src="/lib/jQuery/jquery-3.6.0.min.js"></script>
<script src="/lib/bootstrap-5.1.3-dist/js/bootstrap.bundle.min.js"></script></body></html>