<!doctype html><html lang="fa" dir="rtl"><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-HTH8HV1F9Z"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-HTH8HV1F9Z', { 'anonymize_ip': false });
}
</script><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="geo.region" content="IRAN"><link rel="canonical" href="https://hejazee.ir/posts/1390/11/%D8%A7%D8%AC%D8%B1%D8%A7%DB%8C-view-%D9%88-%D8%A7%D8%B3%D8%AA%D9%81%D8%A7%D8%AF%D9%87-%D8%A7%D8%B2-%D8%AE%D8%B1%D9%88%D8%AC%DB%8C-%D8%A2%D9%86-%D8%AF%D8%B1-%DA%A9%D8%AF%D9%86%D9%88%DB%8C%D8%B3%DB%8C/"><link rel="shortcut icon" href="/favicon.ico" type="image/png"><title>اجرای View و استفاده از خروجی آن در کدنویسی | وبلاگ رسمی احمد حجازی</title><link rel="stylesheet" href="/lib/bootstrap-5.1.3-dist/css/bootstrap.rtl.min.css"><link rel="stylesheet" href="/lib/fontawesome-free-5.15.2-web/css/all.min.css"><link rel="stylesheet" href="/fonts/fonts.css"><link rel="stylesheet" href="/scss/index.eae19926520d6f18098f9660e787191b8730bec9cc57de05b3b9f1e3de9c42a2.css" integrity="sha256-6uGZJlINbxgJj5Zg54cZG4cwvsnMV94Fs7nx496cQqI=" crossorigin="anonymous"></head><body><nav class="navbar navbar-expand-lg navbar-dark bg-dark" id="farsaran-header-nav"><div class="container"><a class="navbar-brand order-0 flex-grow-1 flex-lg-grow-0" href="/"><img src="/logo.svg" alt="وبلاگ رسمی احمد حجازی" height="34"></a>
<button class="navbar-toggler order-2 order-lg-1" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="نمایش منو">
<span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse mb-3 mb-lg-0" id="navbarSupportedContent"><ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item"><a class="nav-link" href="/contact/">تماس</a></li><li class="nav-item"><a class="nav-link" href="/about/">درباره</a></li></ul></div><script async src="https://cse.google.com/cse.js?cx=929a8d3c0fdb44711">
    </script><div class="gcse-search"></div><style>.gsc-control-cse{padding:0}.gsc-input tbody,.gsc-input input{background-color:#ddd}.gsc-input td.gsib_a{padding:.1rem .5rem}.gsc-search-button{display:none}</style></div></nav><div class="container mt-4"><div class="row"><div class="col-md-9"><header><h1 class="post-title fw-bold fs-2"><a class="text-dark" href="/posts/1390/11/%D8%A7%D8%AC%D8%B1%D8%A7%DB%8C-view-%D9%88-%D8%A7%D8%B3%D8%AA%D9%81%D8%A7%D8%AF%D9%87-%D8%A7%D8%B2-%D8%AE%D8%B1%D9%88%D8%AC%DB%8C-%D8%A2%D9%86-%D8%AF%D8%B1-%DA%A9%D8%AF%D9%86%D9%88%DB%8C%D8%B3%DB%8C/">اجرای View و استفاده از خروجی آن در کدنویسی</a></h1></header><small class="d-block text-secondary post-date">ارسال شده در
<time datetime="2012-01-24">Jan 24, 2012</time></small><article class="blog-post" role="article" typeof="schema:Article"><p>نسخه ی views مورد بحث: <a href="http://drupal.org/node/1341504" rel="nofollow">6.x-2.16</a></p><p>منظور از اجرای View این است که می خواهیم خروجی یک View را به صورت یک آرایه در برنامه مان استفاده کنیم.</p><p>هر View، به چند طریق می تواند استفاده شود:</p><ul><li>طریقه‌ی معمول که عبارت است از قرار دادن View در یک Block یا در یک Page یا ... که دروپال به صورت خودکار&nbsp; View را اجرا می کند و خروجی آن Render شده و به کاربر نمایش داده می شود.</li><li>اجرای View در برنامه نویسی به این صورت که View فراخوانی می شود و خروجی آن به صورت یک آرایه‌ی ساخت یافته در برنامه Return می شود. در این حالت View رندر نمی شود و می توان از ساختمان داده ی آن استفاده‌ی بهینه کرد.</li><li>...</li></ul><p>در زیر چند تا نمونه را معرفی می کنم:</p><fieldset class="tip"><legend>توجه</legend>جهت آزمایش، می توانید یک View ایجاد کنید که لیست node هایی که منتشر شده اند و نوع آن ها story است را نشان دهد. و مثال های این قسمت را بر روی آن انجام دهید.<br>در زیر من کد Export گرفته شده ی این View را برای استفاده ی شما قرار می دهم که می توانید آن را Import کنید تا View ی مورد نظر ایجاد شود.<br><br>فایل ضمیمه شده است. <a href="http://www.hejazee.ir/sites/www.hejazee.com/files/fields/field_tutorial_files/u1/views_test.txt">views_test.txt</a></fieldset><h2>روش اول</h2><p>می خواهیم View را اجرا کنیم و خروجی HTML حاصل از Render شدن View را در برنامه استفاده کنیم:</p><pre class="brush: php;fontsize: 100; first-line: 1;">$view = views_get_view('{view name}');
$display_id = 'default';
$view-&gt;set_display($display_id);
$view-&gt;execute();
<p>print $view-&gt;preview();</pre><p>طرز کار کد فوق به این صورت است که:</p><p>1 - ابتدا، با استفاده از تابع views_get_view() آبجکت یک View را به دست می آوریم.<br>این متد، نام View را به عنوان آرگومان دریافت می کند و یک آبجکت View برمیگرداند.</p><p>توجه کنید که برای به دست آوردن نام View باید به آدرس URL صفحه ی ویرایش View دقت کنید. مثلا در مثال ما، آدرس صفحه‌ی ویرایش View عبارت است از:<br>/admin/build/views/edit/example_view<br>که نام View می شود : &ldquo;example_view&rdquo;</p><p>2 - آبجکت View که برگردانده می شود دارای تعداد زیادی خصوصیت و متد است. یکی از متد های این آبجکت، متد set_display() می باشد.<br>متد set_display() نام یک display را به عنوان آرگومان دریافت می کند و display فعال در آبجکت view را تنظیم می نماید.</p><p>برای به دست آوردن نام display، صفحه ی ویرایش View را باز کنید و موس را بر روی تب افقی متعلق به Display مورد نظرتان بیاورید. در پایین پنجره ی مرورگر، آدرس URL آن نقطه نمایش داده می شود. بخش انتهایی آدرس URL نام display را نشان می دهد.</p><p><a href="http://www.hejazee.com/sites/www.hejazee.com/files/fields/field_tutorial_images/books/u1/views-display.jpg" title="تصویر چگونگی نمایش دادن نام Display در هنگام ویرایش View">تصویر چگونگی نمایش دادن نام Display در هنگام ویرایش View</a></p><p>در مثال ما، نام display ها عبارت است از:<br>default, page_1<br>همان طور که می بینید نام Display ها به این صورت نام گذاری می شود که نوع Display بعلاوه یک آندلاین و شمارنده ی Display می باشد. مثل page_1, page_2 , &mldr;</p><p>3 - پس از این که Display پیش فرض را در آبجکت View تنظیم کردیم، می توانیم آن را با فراخوانی متد execute() اجرا کنیم. متد execute سبب می شود که View اجرا شود و خروجی آن نیز در داخل آبجکت قرار گیرد. یعنی آبجکت View بعد از فراخوانی متد execute نتایج اجرا را نیز شامل می شود. که در خاصیت result آن قرار گرفته است.</p><p>4 - متد preview از آبجکت view، خروجی view را Render می کند و به فرمت HTML باز می گرداند که می توان مستقیما آن را print گرفت.</p><h2>روش دوم</h2><p>می توان با متد execute_display() از آبجکت view مستقیما یک display خاص از view را اجرا کنیم و خروجی HTML آن را به دست آوریم. (در این حالت دیگر نیازی به استفاده از متد set_display() نمی باشد.)</p><pre class="brush: php;fontsize: 100; first-line: 1;">$view-&gt;execute_display(&rsquo;{display name}&rsquo;, &lsquo;{arguments}&rsquo;)</pre><p>این متد دو تا آرگومان دریافت می کند که اولی نام Display مورد نظر است و دومی یک آرایه شامل آرگومان ها جهت ارسال به View می باشد. اگر View ی مورد نظر دارای آرگومان نباشد،می توان یک آرایه ی خالی ارسال کرد. array()</p><pre class="brush: php;fontsize: 100; first-line: 1;">print $view-&gt;execute_display(&lsquo;default&rsquo;, array());</pre></p><h5>مطالب مرتبط:</h5><ul><li></li><li><a href="/posts/1391/09/%D9%85%D9%82%D8%AF%D9%85%D9%87-%D8%A7%DB%8C-%D8%A8%D8%B1-%DA%A9%D9%84%D8%A7%D8%B3-entityfieldquery-%D8%AF%D8%B1%D9%88%D9%BE%D8%A7%D9%84-%D8%A8%D8%B1%D8%A7%DB%8C-%D9%BE%D8%B1%D8%B3-%D9%88-%D8%AC%D9%88-%D8%A7%D8%B2-entity-%D9%87%D8%A7-%D9%88-%D9%81%DB%8C%D9%84%D8%AF-%D9%87%D8%A7/">مقدمه ای بر کلاس EntityFieldQuery دروپال برای پرس و جو از entity ها و فیلد ها</a></li></ul></article><div id="comments"><div class="commends-header"><h3>نظرات شما</h3><small class="text-muted" style="font-size:.7rem">قسمت نظرات با استفاده از سرویس <a href="https://disqus.com/">دیسکاس</a> پیاده سازی شده است.
متاسفانه این سرویس از داخل ایران قابل دسترس نیست. لطفا از آی پی خارجی استفاده کنید.</small></div><div id="disqus_thread"></div><script>
        window.disqus_config = function () { 
          this.language = "fa";
        };
        (function() {
            var d = document, s = d.createElement('script'); s.async = true;
            s.src = '//' + "hejazee" + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
      </script></div></div><aside class="col-md-3 mt-4"><h3>Monthly Archive</h3><ul><li><a href="/month/1401-06/" title="All posts from 1401-06">1401-06</a> (1)</li><li><a href="/month/1395-06/" title="All posts from 1395-06">1395-06</a> (1)</li><li><a href="/month/1395-01/" title="All posts from 1395-01">1395-01</a> (1)</li><li><a href="/month/1394-12/" title="All posts from 1394-12">1394-12</a> (3)</li><li><a href="/month/1394-08/" title="All posts from 1394-08">1394-08</a> (1)</li><li><a href="/month/1394-07/" title="All posts from 1394-07">1394-07</a> (1)</li><li><a href="/month/1394-03/" title="All posts from 1394-03">1394-03</a> (1)</li><li><a href="/month/1394-02/" title="All posts from 1394-02">1394-02</a> (1)</li><li><a href="/month/1393-12/" title="All posts from 1393-12">1393-12</a> (1)</li><li><a href="/month/1393-07/" title="All posts from 1393-07">1393-07</a> (1)</li><li><a href="/month/1393-06/" title="All posts from 1393-06">1393-06</a> (2)</li><li><a href="/month/1393-05/" title="All posts from 1393-05">1393-05</a> (2)</li><li><a href="/month/1393-04/" title="All posts from 1393-04">1393-04</a> (4)</li><li><a href="/month/1393-03/" title="All posts from 1393-03">1393-03</a> (5)</li><li><a href="/month/1393-02/" title="All posts from 1393-02">1393-02</a> (1)</li><li><a href="/month/1393-01/" title="All posts from 1393-01">1393-01</a> (4)</li><li><a href="/month/1392-12/" title="All posts from 1392-12">1392-12</a> (5)</li><li><a href="/month/1392-10/" title="All posts from 1392-10">1392-10</a> (5)</li><li><a href="/month/1392-06/" title="All posts from 1392-06">1392-06</a> (1)</li><li><a href="/month/1392-04/" title="All posts from 1392-04">1392-04</a> (1)</li><li><a href="/month/1392-02/" title="All posts from 1392-02">1392-02</a> (1)</li><li><a href="/month/1392-01/" title="All posts from 1392-01">1392-01</a> (5)</li><li><a href="/month/1391-11/" title="All posts from 1391-11">1391-11</a> (5)</li><li><a href="/month/1391-10/" title="All posts from 1391-10">1391-10</a> (4)</li><li><a href="/month/1391-09/" title="All posts from 1391-09">1391-09</a> (2)</li><li><a href="/month/1391-08/" title="All posts from 1391-08">1391-08</a> (3)</li><li><a href="/month/1391-07/" title="All posts from 1391-07">1391-07</a> (6)</li><li><a href="/month/1391-05/" title="All posts from 1391-05">1391-05</a> (1)</li><li><a href="/month/1391-04/" title="All posts from 1391-04">1391-04</a> (1)</li><li><a href="/month/1391-03/" title="All posts from 1391-03">1391-03</a> (2)</li><li><a href="/month/1391-02/" title="All posts from 1391-02">1391-02</a> (4)</li><li><a href="/month/1391-01/" title="All posts from 1391-01">1391-01</a> (6)</li><li><a href="/month/1390-12/" title="All posts from 1390-12">1390-12</a> (9)</li><li><a href="/month/1390-11/" title="All posts from 1390-11">1390-11</a> (8)</li><li><a href="/month/1390-10/" title="All posts from 1390-10">1390-10</a> (7)</li><li><a href="/month/1390-09/" title="All posts from 1390-09">1390-09</a> (4)</li><li><a href="/month/1390-08/" title="All posts from 1390-08">1390-08</a> (7)</li><li><a href="/month/1390-07/" title="All posts from 1390-07">1390-07</a> (15)</li><li><a href="/month/1390-06/" title="All posts from 1390-06">1390-06</a> (18)</li></ul></aside></div></div><footer id="footer-wrapper"><div id="footer-bottom-wrapper"><div class="container"><div class="row"><div class="col-12"><p dir="ltr">&copy; Copyright 2011-2022 * Ahmad Hejazee * All rights reserved.</p><small dir="ltr">Proudly Powered by Drupal 10 ;)</small></div></div></div></div></footer><script src="/lib/jQuery/jquery-3.6.0.min.js"></script>
<script src="/lib/bootstrap-5.1.3-dist/js/bootstrap.bundle.min.js"></script></body></html>